<VirtualHost *:80>
    ServerName ienet.online
    ServerAlias www.ienet.online
    DocumentRoot /var/www/vhosts/vivaindia.com/ienet.online/public
    
    <Directory /var/www/vhosts/vivaindia.com/ienet.online/public>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
        
        # Try static files first, then Node.js
        RewriteEngine On
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ http://127.0.0.1:3000/$1 [P,L]
    </Directory>
    
    # Proxy setup for Node.js fallback
    ProxyPreserveHost On
    ProxyRequests Off
    
    ErrorLog /var/log/apache2/ienet_error.log
    CustomLog /var/log/apache2/ienet_access.log combined
</VirtualHost>

<VirtualHost *:443>
    ServerName ienet.online
    ServerAlias www.ienet.online
    DocumentRoot /var/www/vhosts/vivaindia.com/ienet.online/public
    
    # SSL configuration would go here
    
    <Directory /var/www/vhosts/vivaindia.com/ienet.online/public>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
        
        RewriteEngine On
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ http://127.0.0.1:3000/$1 [P,L]
    </Directory>
    
    ProxyPreserveHost On
    ProxyRequests Off
    
    ErrorLog /var/log/apache2/ienet_ssl_error.log
    CustomLog /var/log/apache2/ienet_ssl_access.log combined
</VirtualHost>